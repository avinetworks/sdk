<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>AVI API on Swagger UI</title>

    <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32"/>
    <link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16"/>
    <link href='css/typography.css' media='screen' rel='stylesheet' type='text/css'/>
    <link href='css/reset.css' media='screen' rel='stylesheet' type='text/css'/>
    <link href='css/screen.css' media='screen' rel='stylesheet' type='text/css'/>
    <link href='css/reset.css' media='print' rel='stylesheet' type='text/css'/>
    <link href='css/print.css' media='print' rel='stylesheet' type='text/css'/>
    <link href='lib/chosen_v1.6.2/chosen.css' media='screen' rel='stylesheet' type='text/css'/>

    <script src='lib/object-assign-pollyfill.js' type='text/javascript'></script>
    <script src='lib/jquery-1.8.0.min.js' type='text/javascript'></script>
    <script src='lib/jquery.slideto.min.js' type='text/javascript'></script>
    <script src='lib/jquery.wiggle.min.js' type='text/javascript'></script>
    <script src='lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
    <script src='lib/handlebars-4.0.5.js' type='text/javascript'></script>
    <script src='lib/lodash.min.js' type='text/javascript'></script>
    <script src='lib/backbone-min.js' type='text/javascript'></script>
    <script src='swagger-ui.js' type='text/javascript'></script>
    <script src='lib/highlight.9.1.0.pack.js' type='text/javascript'></script>
    <script src='lib/highlight.9.1.0.pack_extended.js' type='text/javascript'></script>
    <script src='lib/jsoneditor.min.js' type='text/javascript'></script>
    <script src='lib/marked.js' type='text/javascript'></script>
    <script src='lib/swagger-oauth.js' type='text/javascript'></script>
    <script src='lib/chosen_v1.6.2/chosen.jquery.min.js'></script>

    <style>
        body.swagger-section #header {
            background-color: #434343;
            padding: 0;
            height: 76px;
        }

        body.swagger-section #header > div.swagger-ui-wrap {
            box-sizing: border-box;
            padding-left: 90px;
            background-image: url('images/avi-logo.svg');
            background-repeat: no-repeat;
            background-size: auto 50px;
            background-position: 0 16px;
        }

        body.swagger-section #header > div.swagger-ui-wrap > div {
            display: inline-block;
            margin: 14px 2em;
            line-height: 20px;
            color: white;
        }

        body.swagger-section #header > div.swagger-ui-wrap > div > div:first-child {
            margin-bottom: 5px;
        }

        body.swagger-section #header > div.swagger-ui-wrap > div.dropdown {
            width: 160px;
        }

        body.swagger-section #header > div.swagger-ui-wrap > div.dropdown a {
            color: black;
        }
        body.swagger-section #header > div.swagger-ui-wrap > div.dropdown > div.chosen-container {
            width: 100% !important;
        }

        body.swagger-section #header > div.swagger-ui-wrap div.openedFileLabel > a {
            color: #DDD;
        }
    </style>

    <script type="text/javascript">
        //should be populated from protobuf
        window.objectTypes = [
            {name: 'ActionGroupConfig', value: 'ActionGroupConfig'},
            {name: 'Alert', value: 'Alert'},
            {name: 'AlertConfig', value: 'AlertConfig'},
            {name: 'AlertEmailConfig', value: 'AlertEmailConfig'},
            {name: 'AlertObjectList', value: 'AlertObjectList'},
            {name: 'AlertScriptConfig', value: 'AlertScriptConfig'},
            {name: 'AlertSyslogConfig', value: 'AlertSyslogConfig'},
            {name: 'AnalyticsProfile', value: 'AnalyticsProfile'},
            {name: 'Anomaly', value: 'anomaly'},
            {name: 'APICLifsRuntime', value: 'APICLifsRuntime'},
            {name: 'Application', value: 'Application'},
            {name: 'ApplicationPersistenceProfile', value: 'ApplicationPersistenceProfile'},
            {name: 'ApplicationProfile', value: 'ApplicationProfile'},
            {name: 'AuthProfile', value: 'AuthProfile'},
            {name: 'AutoScaleLaunchConfig', value: 'AutoScaleLaunchConfig'},
            {name: 'Backup', value: 'Backup'},
            {name: 'BackupConfiguration', value: 'BackupConfiguration'},
            {name: 'CertificateManagementProfile', value: 'CertificateManagementProfile'},
            {name: 'Cloud', value: 'Cloud'},
            {name: 'CloudConnectorUser', value: 'CloudConnectorUser'},
            {name: 'CloudProperties', value: 'CloudProperties'},
            {name: 'CloudRuntime', value: 'CloudRuntime'},
            {name: 'Cluster', value: 'Cluster'},
            {name: 'ControllerLicense', value: 'ControllerLicense'},
            {name: 'ControllerProperties', value: 'ControllerProperties'},
            {name: 'CustomIpamDnsProfile', value: 'CustomIpamDnsProfile'},
            {name: 'DebugController', value: 'DebugController'},
            {name: 'DebugServiceEngine', value: 'DebugServiceEngine'},
            {name: 'DebugVirtualService', value: 'DebugVirtualService'},
            {name: 'DnsPolicy', value: 'DnsPolicy'},
            {name: 'ErrorPageBody', value: 'ErrorPageBody'},
            {name: 'ErrorPageProfile', value: 'ErrorPageProfile'},
            {name: 'Gslb', value: 'Gslb'},
            {name: 'GslbGeoDbProfile', value: 'GslbGeoDbProfile'},
            {name: 'GslbService', value: 'GslbService'},
            {name: 'HardwareSecurityModuleGroup', value: 'HardwareSecurityModuleGroup'},
            {name: 'HealthMonitor', value: 'HealthMonitor'},
            {name: 'Healthscore', value: 'healthscore'},
            {name: 'HTTPPolicySet', value: 'HTTPPolicySet'},
            {name: 'IpAddrGroup', value: 'IpAddrGroup'},
            {name: 'IpamDnsProviderProfile', value: 'IpamDnsProviderProfile'},
            {name: 'JobEntry', value: 'JobEntry'},
            {name: 'LogControllerMapping', value: 'LogControllerMapping'},
            {name: 'Metrics', value: 'metrics'},
            {name: 'MicroService', value: 'MicroService'},
            {name: 'MicroServiceGroup', value: 'MicroServiceGroup'},
            {name: 'Network', value: 'Network'},
            {name: 'NetworkProfile', value: 'NetworkProfile'},
            {name: 'NetworkRuntime', value: 'NetworkRuntime'},
            {name: 'NetworkSecurityPolicy', value: 'NetworkSecurityPolicy'},
            {name: 'PKIProfile', value: 'PKIProfile'},
            {name: 'Pool', value: 'Pool'},
            {name: 'PoolGroup', value: 'PoolGroup'},
            {name: 'PoolGroupDeploymentPolicy', value: 'PoolGroupDeploymentPolicy'},
            {name: 'PriorityLabels', value: 'PriorityLabels'},
            {name: 'Role', value: 'Role'},
            {name: 'Scheduler', value: 'Scheduler'},
            {name: 'SCPoolServerStateInfo', value: 'SCPoolServerStateInfo'},
            {name: 'SCVsStateInfo', value: 'SCVsStateInfo'},
            {name: 'SecureChannelAvailableLocalIPs', value: 'SecureChannelAvailableLocalIPs'},
            {name: 'SecureChannelMapping', value: 'SecureChannelMapping'},
            {name: 'SecureChannelToken', value: 'SecureChannelToken'},
            {name: 'SeProperties', value: 'SeProperties'},
            {name: 'ServerAutoScalePolicy', value: 'ServerAutoScalePolicy'},
            {name: 'ServiceEngine', value: 'ServiceEngine'},
            {name: 'ServiceEngineGroup', value: 'ServiceEngineGroup'},
            {name: 'SnmpTrapProfile', value: 'SnmpTrapProfile'},
            {name: 'SSLKeyAndCertificate', value: 'SSLKeyAndCertificate'},
            {name: 'SSLProfile', value: 'SSLProfile'},
            {name: 'StringGroup', value: 'StringGroup'},
            {name: 'SystemConfiguration', value: 'SystemConfiguration'},
            {name: 'Tenant', value: 'Tenant'},
            {name: 'TrafficCloneProfile', value: 'TrafficCloneProfile'},
            {name: 'UserAccountProfile', value: 'UserAccountProfile'},
            {name: 'UserActivity', value: 'UserActivity'},
            {name: 'VIDCInfo', value: 'VIDCInfo'},
            {name: 'VIMgrClusterRuntime', value: 'VIMgrClusterRuntime'},
            {name: 'VIMgrControllerRuntime', value: 'VIMgrControllerRuntime'},
            {name: 'VIMgrDCRuntime', value: 'VIMgrDCRuntime'},
            {name: 'VIMgrHostRuntime', value: 'VIMgrHostRuntime'},
            {name: 'VIMgrNWRuntime', value: 'VIMgrNWRuntime'},
            {name: 'VIMgrSEVMRuntime', value: 'VIMgrSEVMRuntime'},
            {name: 'VIMgrVcenterRuntime', value: 'VIMgrVcenterRuntime'},
            {name: 'VIMgrVMRuntime', value: 'VIMgrVMRuntime'},
            {name: 'VIPGNameInfo', value: 'VIPGNameInfo'},
            {name: 'VirtualService', value: 'VirtualService'},
            {name: 'VrfContext', value: 'VrfContext'},
            {name: 'VSDataScriptSet', value: 'VSDataScriptSet'},
            {name: 'VsVip', value: 'VsVip'},
            {name: 'WafPolicy', value: 'WafPolicy'},
            {name: 'WafProfile', value: 'WafProfile'},
            {name: 'Webhook', value: 'Webhook'},
        ];

        window.loadFile = function(fileName) {
            var url;

            if (fileName && fileName.indexOf('.') === -1) {
                $('#objectTypeSelector')
                    .val(fileName)
                    .trigger('chosen:updated');

                url = '/swagger/' + fileName + '.yaml';
            } else {
                url = fileName;
            }

            $('#spec').hide();

            window.swaggerUi = new window.SwaggerUi({
                url: url,
                dom_id: 'swagger-ui-container',
                supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch'],
                onComplete: function() {
                    $('pre code').each(function(i, e) {
                        hljs.highlightBlock(e)
                    });

                    var a = $('<a />')
                            .text(window.location.origin + url)
                            .attr('href', url);

                    $('#openedFileLabel').html(a);
                    $('#spec').show();
                },
                onFailure: function() {
                    console.log('Unable to Load SwaggerUI');
                },
                docExpansion: 'list',
                validatorUrl: null,
                jsonEditor: false,
                apisSorter: 'alpha',
                defaultModelRendering: 'schema',
                showRequestHeaders: false
            });

            window.swaggerUi.load();
        };

        window.init = function(window) {
            var fileName = window.location.search.match(/([^&]+)/);

            if (fileName && fileName.length > 1) {
                fileName = decodeURIComponent(fileName[1].slice(1));
            } else {
                fileName = 'VirtualService';//default yaml filename to be loaded
            }

            var selectorNode = $('#objectTypeSelector');

            window.objectTypes.forEach(function(config) {
                var option = $('<option />')
                        .text(config.name)
                        .attr('value', config.value);
                selectorNode.append(option);
            });

            selectorNode.chosen();

            window.loadFile(fileName);
        };

        $(function() {
            window.init(window);
        });
    </script>
</head>

<body class="swagger-section">
<div id="header">
    <div class="swagger-ui-wrap">
        <div class="dropdown">
            <div>Select API</div>
            <select onchange="loadFile(this.value)" id="objectTypeSelector"></select>
        </div>
        <div class="spec" id="spec">
            <div class="header">Spec file:</div>
            <div class="openedFileLabel" id="openedFileLabel"></div>
        </div>
    </div>
</div>

<div id="message-bar" class="swagger-ui-wrap" data-sw-translate>&nbsp;</div>
<div id="swagger-ui-container" class="swagger-ui-wrap"></div>
</body>
</html>