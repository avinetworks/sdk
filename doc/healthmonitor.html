
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> HealthMonitor </title>

    <!-- Bootstrap -->
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="bootstrap-theme.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesnt work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
<body>
<h1 class='text-primary'>HealthMonitor</h1>

<h3 class='text-primary'>Description</h3>
    

<h3 class='text-primary'>API</h3>
<div class="container">
<pre><code>
    POST /api/healthmonitor
    PUT /api/healthmonitor/&ltkey&gt
    DELETE /api/healthmonitor/&ltkey&gt
    GET /api/healthmonitor
    GET /api/healthmonitor/&ltkey&gt
</code></pre>
</div>

<h3 class='text-primary'>CLI</h3>
<div class="container">
<pre><code>
    configure healthmonitor &ltkey&gt
    show healthmonitor &ltkey&gt
</code></pre>
</div>

<h3 class='text-primary'>Examples</h3>
<div class="container">
<p>  To create a basic HTTP health monitor that uses GET / to determine if the service is alive  </p>
<pre><code> <strong>POST /api/healthmonitor</strong>

{
    "receive_timeout": 4, 
    "name": "http-hmon", 
    "failed_checks": 3, 
    "send_interval": 10, 
    "http_monitor": {
        "http_request": "GET / HTTP/1.0"
    }, 
    "type": "HEALTH_MONITOR_HTTP"
}
 </code></pre>
</div>

<h3 class='text-primary'>Data</h3>
<div class="container">
<div class='container'id=HealthMonitor
<p><h3 class='text-success'>HealthMonitor<br></h3></p>
<p><strong>uuid</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>required</dd><dt>Description</dt><dd>UUID of the health monitor.</dd></dl><p><strong>name</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>required</dd><dt>Description</dt><dd>A user friendly name for this health monitor.</dd></dl><p><strong>send_interval</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>int32</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Frequency, in seconds, that monitors are sent to a server.</dd><dt>Default</dt><dd>10</dd></dl><p><strong>receive_timeout</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>int32</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>A valid response from the server is expected within the receive timeout window.  This timeout must be less than the send interval.  If server status is regularly flapping up and down, consider increasing this value.</dd><dt>Default</dt><dd>4</dd></dl><p><strong>successful_checks</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>int32</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Number of continuous successful health checks before server is marked up.</dd><dt>Default</dt><dd>2</dd></dl><p><strong>failed_checks</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>int32</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Number of continuous failed health checks before the server is marked down.</dd><dt>Default</dt><dd>2</dd></dl><p><strong>type</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>enum</dd><dt>Category</dt><dd>required</dd><dt>Description</dt><dd>Type of the health monitor.</dd><dt>Choices</dt><dd>HEALTH_MONITOR_TCP, HEALTH_MONITOR_HTTPS, HEALTH_MONITOR_EXTERNAL, HEALTH_MONITOR_UDP, HEALTH_MONITOR_DNS, HEALTH_MONITOR_HTTP, HEALTH_MONITOR_GSLB, HEALTH_MONITOR_PING</dd></dl><p><strong>tcp_monitor</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd><a href=#HealthMonitorTcp>HealthMonitorTcp</a></dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd></dd></dl><p><strong>http_monitor</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd><a href=#HealthMonitorHttp>HealthMonitorHttp</a></dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd></dd></dl><p><strong>https_monitor</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd><a href=#HealthMonitorHttp>HealthMonitorHttp</a></dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd></dd></dl><p><strong>external_monitor</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd><a href=#HealthMonitorExternal>HealthMonitorExternal</a></dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd></dd></dl><p><strong>udp_monitor</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd><a href=#HealthMonitorUdp>HealthMonitorUdp</a></dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd></dd></dl><p><strong>dns_monitor</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd><a href=#HealthMonitorDNS>HealthMonitorDNS</a></dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd></dd></dl><p><strong>monitor_port</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>int32</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Use this port instead of the port defined for the server in the Pool. If the monitor succeeds to this port, the load balanced traffic will still be sent to the port of the server defined within the Pool.</dd></dl><p><strong>description</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd></dd></dl><p><strong>tenant_ref</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd><a href=tenant.html#Tenant>Reference to Tenant</a></dd><dt>Category</dt><dd>required</dd><dt>Description</dt><dd></dd></dl></div>
<div class='container'id=HealthMonitorTcp
<p><h3 class='text-success'>HealthMonitorTcp<br></h3></p>
<p><strong>tcp_request</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Request data to send after completing the TCP handshake.</dd></dl><p><strong>tcp_response</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Match for the desired keyword in the first 2Kb of the server's TCP response. If this field is left blank, no server response is required.</dd></dl><p><strong>maintenance_response</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Match or look for this keyword in the first 2KB of server's response indicating server maintenance.  A successful match results in the server being marked down.</dd></dl><p><strong>tcp_half_open</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>bool</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Configure TCP health monitor to use half-open TCP connections to monitor the health of backend servers thereby avoiding consumption of a full fledged server side connection and the overhead and logs associated with it.  This method is light-weight as it makes use of listener in server's kernel layer to measure the health and a child socket or user thread is not created on the server side.</dd><dt>Default</dt><dd>False</dd></dl></div>
<div class='container'id=HealthMonitorHttp
<p><h3 class='text-success'>HealthMonitorHttp<br></h3></p>
<p><strong>http_request</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Send an HTTP request to the server.  The default GET / HTTP/1.0 may be extended with additional headers or information.  For instance, GET /index.htm HTTP/1.1 Host: www.site.com Connection: Close</dd><dt>Default</dt><dd>GET / HTTP/1.0</dd></dl><p><strong>http_response_code</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>enum</dd><dt>Category</dt><dd>repeated</dd><dt>Description</dt><dd>List of HTTP response codes to match as successful.  Default is 2xx.</dd><dt>Choices</dt><dd>HTTP_1XX, HTTP_3XX, HTTP_2XX, HTTP_5XX, HTTP_4XX, HTTP_ANY</dd></dl><p><strong>http_response</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Match for a keyword in the first 2Kb of the server header and body response.</dd></dl><p><strong>maintenance_code</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>uint32</dd><dt>Category</dt><dd>repeated</dd><dt>Description</dt><dd>Match or look for this HTTP response code indicating server maintenance.  A successful match results in the server being marked down.</dd></dl><p><strong>maintenance_response</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Match or look for this keyword in the first 2KB of server header and body response indicating server maintenance.  A successful match results in the server being marked down.</dd></dl></div>
<div class='container'id=HealthMonitorExternal
<p><h3 class='text-success'>HealthMonitorExternal<br></h3></p>
<p><strong>command_path</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Path of external health monitor script.</dd></dl><p><strong>command_parameters</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Optional arguments to feed into the script.</dd></dl><p><strong>command_code</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>required</dd><dt>Description</dt><dd>Command script provided inline.</dd></dl><p><strong>command_variables</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Environment variables to be fed into the script.</dd></dl></div>
<div class='container'id=HealthMonitorUdp
<p><h3 class='text-success'>HealthMonitorUdp<br></h3></p>
<p><strong>udp_request</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Send UDP request.</dd></dl><p><strong>udp_response</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Match for keyword in the UDP response.</dd></dl><p><strong>maintenance_response</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>Match or look for this keyword in the first 2KB of server's response indicating server maintenance.  A successful match results in the server being marked down.</dd></dl></div>
<div class='container'id=HealthMonitorDNS
<p><h3 class='text-success'>HealthMonitorDNS<br></h3></p>
<p><strong>query_name</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>required</dd><dt>Description</dt><dd>The DNS monitor will query the DNS server for the fully qualified name in this field.</dd></dl><p><strong>qtype</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>enum</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>  Query_Type: Response has atleast one answer of which      the resource record type matches the query type   Any_Type: Response should contain atleast one answer  AnyThing: An empty answer is enough</dd><dt>Default</dt><dd>DNS_QUERY_TYPE</dd><dt>Choices</dt><dd>DNS_ANY_TYPE, DNS_ANY_THING, DNS_QUERY_TYPE</dd></dl><p><strong>rcode</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>enum</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>When No Error is selected, a DNS query will be marked failed is any error code is returned by the server.  With Any selected, the monitor ignores error code in the responses.</dd><dt>Default</dt><dd>RCODE_NO_ERROR</dd><dt>Choices</dt><dd>RCODE_NO_ERROR, RCODE_ANYTHING</dd></dl><p><strong>response_string</strong><br></p>
<dl class='dl-horizontal'><dt>Type</dt><dd>string</dd><dt>Category</dt><dd>optional</dd><dt>Description</dt><dd>The resource record of the queried DNS server's response for the Request Name must include the IP address defined in this field. </dd></dl></div>

</div>


<h1 class='text-primary'>References</h1>
<p>
<a href=".html"></a>
<a href="tenant.html">Tenant</a>
</p>

<h1 class='text-primary'>Sub Objects</h1>

</body>
</html>