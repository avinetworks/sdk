# First scenario
add cs vserver test_cs_vs_1 SSL 10.80.80.18 80 -cltTimeout 180 -Listenpolicy None
bind cs vserver test_cs_vs_1 -lbvserver test_lb_vs_1
bind cs vserver test_cs_vs_1 -policyName test_http_policy_1 -targetLBVserver test_target_lb_vs_1 -priority 100
add cs policy test_http_policy_1 -rule "HTTP.REQ.URL.PATH_AND_QUERY.CONTAINS(\"/soa/composer\")
add lb vserver test_target_lb_vs_1 SSL 0.0.0.0 0 -persistenceType SOURCEIP -timeout 60 -Listenpolicy None -cltTimeout 180
bind lb vserver test_target_lb_vs_1 test_service_1
bind lb vserver test_target_lb_vs_1 test_service_2
bind lb vserver test_target_lb_vs_1 test_service_3
bind lb vserver test_target_lb_vs_1 test_service_4
add service test_service_1 qesappprd01 HTTP 9550 -gslb NONE -maxClient 0 -maxReq 0 -cip ENABLED X-Forwarded-For -usip NO -useproxyport YES -sp ON -cltTimeout 180 -svrTimeout 360 -CKA NO -TCPB NO -CMP NO -accessDown YES
add service test_service_2 qesappprd02 HTTP 9550 -gslb NONE -maxClient 0 -maxReq 0 -cip ENABLED X-Forwarded-For -usip NO -useproxyport YES -sp ON -cltTimeout 180 -svrTimeout 360 -CKA NO -TCPB NO -CMP NO -accessDown YES
add service test_service_3 qesappprd03 HTTP 9550 -gslb NONE -maxClient 0 -maxReq 0 -cip ENABLED X-Forwarded-For -usip NO -useproxyport YES -sp ON -cltTimeout 180 -svrTimeout 360 -CKA NO -TCPB NO -CMP NO -accessDown YES
add service test_service_4 qesappprd04 HTTP 9550 -gslb NONE -maxClient 0 -maxReq 0 -cip ENABLED X-Forwarded-For -usip NO -useproxyport YES -sp ON -cltTimeout 180 -svrTimeout 360 -CKA NO -TCPB NO -CMP NO -accessDown YES
bind service test_service_1 -monitorName test_lb_monitor_1
bind service test_service_2 -monitorName test_lb_monitor_2
bind service test_service_3 -monitorName test_lb_monitor_3
bind service test_service_4 -monitorName test_lb_monitor_4
add server qesappprd01 172.30.39.250
add server qesappprd02 10.53.32.128
add server qesappprd03 172.30.39.252
add server qesappprd04 10.53.32.129
add lb monitor test_lb_monitor_1 HTTP-ECV -send "GET /hqu/health/status/nodeStatus.hqu HTTP/1.1\r\nHost:qualcomm.com\r\nAuthorization: Basic bGI6bGJhZG1pbg==\r\n\r\n" -recv master=true -LRTM ENABLED -interval 10 -resptimeout 5
add lb monitor test_lb_monitor_2 TCP -LRTM DISABLED -destPort 55000
add lb monitor test_lb_monitor_3 TCP -LRTM DISABLED -destPort 55001
add lb monitor test_lb_monitor_4 TCP -LRTM DISABLED -destPort 6001
add lb vserver test_lb_vs_1 SSL 0.0.0.0 0 -persistenceType NONE -Listenpolicy None -cltTimeout 180
bind lb vserver test_lb_vs_1 test_service_1
bind lb vserver test_lb_vs_1 test_service_2
bind lb vserver test_lb_vs_1 test_service_3
bind lb vserver test_lb_vs_1 test_service_4
set ssl service test_service_1 -eRSA ENABLED -sessReuse DISABLED -ssl3 DISABLED
bind ssl service test_service_1 -cipherName ITNET
bind ssl service test_service_1 -certkeyName ns-server-certificate
bind ssl service test_service_1 -eccCurveName P_256
bind ssl service test_service_1 -eccCurveName P_384
bind ssl service test_service_1 -eccCurveName P_224
bind ssl service test_service_1 -eccCurveName P_521
add ssl certKey ns-server-certificate -cert ns-server.cert -key ns-server.key
set ssl vserver test_cs_vs_1 -ssl3 DISABLED
bind ssl vserver test_cs_vs_1 -cipherName ITNET
bind ssl vserver test_cs_vs_1 -certkeyName ews-sdtest12.cer
bind ssl vserver test_cs_vs_1 -eccCurveName P_256
bind ssl vserver test_cs_vs_1 -eccCurveName P_384
bind ssl vserver test_cs_vs_1 -eccCurveName P_224
bind ssl vserver test_cs_vs_1 -eccCurveName P_521
add ssl certKey ews-sdtest12.cer -cert "/nsconfig/ssl/ews-sdtest12915.cer" -key "/nsconfig/ssl/ews-sdtest12.key"
add ssl cipher ITNET
bind ssl cipher ITNET -cipherName TLS1-AES-256-CBC-SHA
bind ssl cipher ITNET -cipherName TLS1-AES-128-CBC-SHA
bind ssl cipher ITNET -cipherName TLS1-DHE-DSS-AES-256-CBC-SHA
bind ssl cipher ITNET -cipherName TLS1-DHE-DSS-AES-128-CBC-SHA
bind ssl cipher ITNET -cipherName TLS1-DHE-RSA-AES-256-CBC-SHA
bind ssl cipher ITNET -cipherName TLS1-DHE-RSA-AES-128-CBC-SHA
# Second scenario
add lb vserver wfmqa2_444_lbvs SSL 10.11.67.179 444 -persistenceType COOKIEINSERT -timeout 0 -Listenpolicy None -cltTimeout 180 -httpProfileName wfmqa2_websocket_prof
bind lb vserver wfmqa2_444_lbvs wfmqa2_8581_2_sg
bind lb vserver wfmqa2_444_lbvs wfmqa2_8591_2_sg
bind ssl vserver wfmqa2_444_lbvs -certkeyName wfmqa2.vzwcorp.com_cert
bind ssl vserver wfmqa2_444_lbvs -eccCurveName P_256
bind ssl vserver wfmqa2_444_lbvs -eccCurveName P_384
bind ssl vserver wfmqa2_444_lbvs -eccCurveName P_224
bind ssl vserver wfmqa2_444_lbvs -eccCurveName P_521
add ns httpProfile wfmqa2_websocket_prof -webSocket ENABLED
add serviceGroup wfmqa2_8581_2_sg SSL -maxClient 0 -maxReq 0 -cip ENABLED x-forwarded-for -usip NO -useproxyport YES -cltTimeout 180 -svrTimeout 360 -CKA NO -TCPB NO -CMP YES
bind serviceGroup wfmqa2_8581_2_sg sasneacslad03.sdc_srv 8581
bind serviceGroup wfmqa2_8581_2_sg 10.11.4.55_srv 8581
add server 10.11.4.55_srv 10.11.4.55
bind serviceGroup wfmqa2_8581_2_sg etmwfmuat2_srv 8581
bind serviceGroup wfmqa2_8581_2_sg -monitorName wfmqa2_8585_DN_m
add lb monitor wfmqa2_8585_DN_m HTTP -respCode 400 -httpRequest "HEAD /keepAlive.html" -destPort 8585
bind serviceGroup wfmqa2_8591_2_sg sasneacslad03.sdc_srv 8591
add server sasneacslad03.sdc_srv 10.11.2.99
bind serviceGroup wfmqa2_8591_2_sg 10.11.4.55_srv 8591
bind serviceGroup wfmqa2_8591_2_sg etmwfmuat2_srv 8591
add server etmwfmuat2_srv 10.170.49.176
bind serviceGroup wfmqa2_8591_2_sg -monitorName wfmqa2_8595_DN_m
add lb monitor wfmqa2_8595_DN_m HTTP -respCode 400 -httpRequest "HEAD /keepAlive.html" -destPort 8595
add ssl certKey wfmqa2.vzwcorp.com_cert -cert wfmqa2.vzwcorp.com_18_cert.pem -key dotcom-2048-key.pem -passcrypt ozhuemd0M9Ixndlc7imzmOnuDRQFdNrT
